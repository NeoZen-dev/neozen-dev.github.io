<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>keys | @neozen/zen</title><meta name="description" content="Documentation for @neozen/zen"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@neozen/zen</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@neozen/zen</a></li><li><a href="keys.html">keys</a></li></ul><h1>Function keys</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p><code>keys()</code> returns an array of: <strong>a)</strong> Nestedly occurring <code>keys</code> or <code>indexes</code> (eg <code>Set</code> keys, array indexes etc) or <strong>b)</strong> <code>props</code> of the input value (props on all objects), including symbols, own &amp; inherited, enumerable &amp; nonEnumerable! The returned props can be filtered by prop type (string or symbol), enumerability, own/inherited, top-level props etc.</p>
<p>Unlike <code>Object.keys()</code>/<code>_.keys()</code>, it returns the <strong>Nested Keys</strong> of the &quot;special objects&quot; <code>Array</code>, <code>Map</code>, <code>Set</code> &amp; <code>TypedArray</code> (by default).</p>
<a id="md:typings-choice" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Typings choice<a href="#md:typings-choice" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The <a href="/functions/keys.html"><code>keys()</code></a> &amp; <a href="/functions/keysS.html"><code>keysS()</code></a> variants share the same implementation and same runtime results, but differ in the props types they return in TypeScript:</p>
<ul>
<li><a href="/functions/keys.html"><code>keys()</code></a> is typed rigorously to return you the <strong>exact types of props</strong> of your input value, based on your options.</li>
<li><a href="/functions/keysS.html"><code>keysS()</code></a> returns <strong>only <code>string</code> or <code>symbol</code> types of props</strong> of your input value, based on your options (similar to <code>_.keys()</code> or <code>Object.keys()</code>).
<a href="https://stackoverflow.com/questions/55012174/why-doesnt-object-keys-return-a-keyof-type-in-typescript/76139008#76139008" target="_blank" class="external">See discussion</a> and more below.</li>
</ul>
<a id="md:examples" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Examples<a href="#md:examples" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><ul>
<li>
<p>returns a <code>realObject</code>'s prop/keys (<code>string</code> by default, <code>symbol</code> optionally)</p>
<pre><code> z.keys({ a: 1, b: 2, c: 3 })           //=&gt; ['a', 'b', 'c'] &amp; type is ('a' | 'b' | 'c')[]
</code></pre>
</li>
<li>
<p>returns an <code>Array</code>'s indexes (by default)</p>
<pre><code> z.keys(['a', 'b', 'c'])                //=&gt; [0, 1, 2 ] &amp; type is number[]
</code></pre>
</li>
<li>
<p>returns <code>Set</code> keys (by default)</p>
<pre><code> z.keys(new Set(['a', 'b', 'c']))       //=&gt; ['a', 'b', 'c'] &amp; type is ('a' | 'b' | 'c')[]
</code></pre>
</li>
<li>
<p>returns <code>Map</code> keys (by default)</p>
<pre><code> z.keys(new Map([['a', 1], ['b', 2], ['c', 3]])) //=&gt; ['a', 'b', 'c'] &amp; type is ('a' | 'b' | 'c')[]
</code></pre>
</li>
</ul>
<p>If you use <code>props: true</code>, then all Object inputs are considered <strong>only for their props</strong> instead:</p>
<pre><code> const myArray = [1, 2, 3]

 myArray.stringProp = 'some Value'
 myArray[Symbol.for('symbolProp')] = 'some other Value'

 z.keys(myArray, { props: true }) // -&gt; ['stringProp']

 // Optionally symbol keys as well
 z.keys(myArray, { props: true, symbol: true}) // -&gt; [ 'stringProp', Symbol(symbolProp) ]
</code></pre>
<p>With <code>props: true</code>, you can also optionally include Object props such as:</p>
<ul>
<li><code>string</code> &amp; <code>symbol</code> props. By default, only <code>string</code> props are included</li>
<li><code>own</code> &amp; <code>inherited</code> props. By default, only <code>own</code> props are included</li>
<li><code>enumerables</code> &amp; <code>nonEnumerables</code> props. By default, only enumerable props are included</li>
<li><code>top</code>-level props like methods <code>toString</code> etc. By default, top level props are excluded</li>
<li><code>hidden</code> top-level &amp; hidden props, like <code>__proto__</code>, <code>__defineGetter__</code> etc</li>
</ul>
<p>See more at <a href="/interfaces/keysOptions.html"><code>KeysOptions</code></a></p>
<p>Adapted from <code>getAllKeysConditionally</code> at <a href="https://stackoverflow.com/questions/8024149/is-it-possible-to-get-the-non-enumerable-inherited-property-names-of-an-object/70629468#70629468" target="_blank" class="external">https://stackoverflow.com/questions/8024149/is-it-possible-to-get-the-non-enumerable-inherited-property-names-of-an-object/70629468#70629468</a>
input</p>
<p><code>Object.keys()</code> &amp; <code>_.keys()</code> return <code>string[]</code> props for all objects (including special objects like <code>Map</code>, <code>Set</code>, <code>Array</code>, <code>TypedArray</code> etc, whose props are usually not interesting). This is how JS works, and TypeScript always follows.</p>
<p>But in the typings realm, TypeScript is simply returns <code>string[]</code> for all objects, instead of returning the actual key literals that it knows about. This is how TypeScript is made, and the TS team is keen to not changing it (see this <a href="https://github.com/microsoft/TypeScript/pull/12253#issuecomment-263132208" target="_blank" class="external">issue of TS's father since 2016</a>).</p>
<p>More Background:</p>
<ul>
<li><a href="https://stackoverflow.com/questions/55012174/why-doesnt-object-keys-return-a-keyof-type-in-typescript/76139008#76139008" target="_blank" class="external">Why doesn't Object.keys return a keyof type in TypeScript?</a></li>
<li><a href="https://refine.dev/blog/typescript-keyof/#typescript-keyof-typeof-pair-an-objectkeys-iteration-example" target="_blank" class="external"><code>keyof typeof</code> &amp; <code>Object.keys()</code> Iteration Example</a></li>
<li><a href="https://github.com/microsoft/TypeScript/pull/12253" target="_blank" class="external">Object.keys() types refinement, and Object.entries() types bugfix</a></li>
<li><a href="https://github.com/microsoft/TypeScript/issues/41036" target="_blank" class="external">Reflect.ownKeys should return the keys of the type that it was called upon</a></li>
<li>Auxiliary / maybe possible solutions:
<ul>
<li><a href="https://github.com/microsoft/TypeScript/issues/22677" target="_blank" class="external">Removing &quot;private&quot; modifier from types</a></li>
<li><a href="https://github.com/Microsoft/TypeScript/issues/12936" target="_blank" class="external">Exact Types #12936</a></li>
<li><a href="https://github.com/sindresorhus/type-fest/blob/main/source/invariant-of.d.ts" target="_blank" class="external">type-fest <code>InvariantOf</code></a></li>
</ul>
</li>
</ul>
<a id="md:zen-zkeys-rationale--stance" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Zen <code>z.keys()</code> rationale &amp; stance<a href="#md:zen-zkeys-rationale--stance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><a id="md:typings-rationale" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Typings Rationale<a href="#md:typings-rationale" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>We return rigorously typed keys in <code>keys()</code>, based on the input value <strong>while respecting all the options</strong> passed and the eventual visibility, because it is useful in many cases and people are relying on extra boilerplate to achieve it.</p>
<p>The TS team's retionale for not including it, is that you will end up receiving more (or less) keys than you expect, and that's a valid point. But we think that's a good thing, because it's a <strong>feature</strong> of JS, and we should be able to handle it gracefully, without throwing errors.</p>
<p>The main mantra is: when we use <code>keys()</code>, <strong>we should NOT care/throw about <em>extra keys</em> you might receive, we just ignore them!</strong></p>
<p>Assume we have a <code>function sendLetterToPerson(person: Person) {}</code>, we should only care about <code>Person</code>'s keys, <code>Person</code>'s functionality.</p>
<ul>
<li>
<p>Our function should not care about other keys that may be present in the object, eg if the <code>person</code> is actually an <code>Employee</code> or <code>Customer</code> instance.</p>
</li>
<li>
<p>Our code <strong>should not try</strong> to get <code>Employee.salary</code> or <code>Customer.loyaltyProgram</code>, because it's not part of the <code>Person</code> interface. If our code deals only with <code>Person.name</code> &amp; <code>Person.address</code> (which are enough <strong>for the purpose of sending a letter</strong>), and doesn't throw if extra props exists, everything will be fine!</p>
</li>
</ul>
<p>We could enforce exact types or invariants (eg via <a href="https://github.com/sindresorhus/type-fest/blob/main/source/invariant-of.d.ts" target="_blank" class="external">type-fest's InvariantOf</a>), but it still misses the purpose (and it's kinda ugly). Because the point is that <strong>we should be able to pass sub-instances to our functions</strong>, and that's the OO &amp; JS way and it's fine, but without sacrificing keys &amp; values typings. If those functions act only on what they should know, we should be fine!</p>
<p>So, the rule is: just don't bother with <strong>extra keys</strong> you might receive. Either ignore them OR handle them gracefully, without throwing! Especially if you're dealing with an <code>z.isInstance()</code> object (eg <code>Person</code>) (or a similar interface), you should NOT be able to access any other member, and that's how it works with all mainstream OO languages! When you're iterating over it for any reason (via <code>z.keys()</code> or <code>z.loop()</code>/<code>z.each()</code>), you can always <code>switch</code> only on the keys you know, and ignore the rest.</p>
<a id="md:historical-reasons" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Historical Reasons<a href="#md:historical-reasons" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Part of the problem arises from JavaScript classes, who's instances are just plain objects, with an added constructor and a hidden <code>__proto__</code> for the inheritance chain.</p>
<p>But Plain Objects in JS are also very commonly being used as <strong>property bags</strong> (i.e. the infamous <code>{prop: 'value'}</code> object), and since <code>Map</code> (that is the <strong>right data structure</strong> for this job) has arrived late to the party and with breaking functionality and support (lodash still doesn't <code>_.each</code> on Map/Set), most code still uses plain objects most of the time! But iterating over key/values &amp; object classes &amp; inheritance are fundamentally different things, but we use the same data structure for both, and that's one reason the problem is manifested.</p>
<a id="md:typings-are-optional" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Typings are optional!<a href="#md:typings-are-optional" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>If you still insist on being pure on TS's dictation, then you can use the plain <code>z.keysS()</code> function, which is exactly the same as <code>z.keys()</code> (same implementation), but returns <code>string[]</code> keys (or <code>(string | symbol)[]</code> etc upon option's request), instead of the rigorously typed <code>z.keys</code> (like <code>Object.keys()</code>).</p>
<a id="md:parameters" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Parameters<a href="#md:parameters" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1></div><div class="tsd-comment tsd-typography"></div></section><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="keys" class="tsd-anchor"></a><span class="tsd-kind-call-signature">keys</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Toptions">Toptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">input</span>, <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../types/Keys-1.html" class="tsd-signature-type tsd-kind-type-alias">Keys</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Toptions">Toptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span><a href="#keys" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="keys.Tinput" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Tinput</span></span></li><li><span><a id="keys.Toptions" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Toptions</span><span class="tsd-signature-keyword"> extends </span><a href="../interfaces/IKeysOptions.html" class="tsd-signature-type tsd-kind-interface">IKeysOptions</a></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">input</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Tinput">Tinput</a></span><div class="tsd-comment tsd-typography"><p>any input value that is an Object (eg Array, Map, Set, Function, Iterator, Generator, etc). <code>Primitive</code> values are allowed by default, but return an empty array of <code>never[]</code> (with <code>strict: false</code>, the default).</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Toptions">Toptions</a></span><div class="tsd-comment tsd-typography"><p>KeysOptions to control the output of keys / props, including:</p>
<ul>
<li><code>own</code>: if <code>true</code> (default), include own props</li>
<li><code>string</code>: if <code>true</code> (default), include string props</li>
<li><code>enumerables</code>: if <code>true</code> (default), include enumerable props
And these are <code>false</code>/<code>undefined</code> by default:</li>
<li><code>props</code>: if <code>true</code>, only <strong>props</strong> are returned, instead <strong>Nested Keys</strong>. And <code>'all'</code> will bring all!</li>
<li><code>symbol</code>: if <code>true</code>, include symbol props</li>
<li><code>inherited</code>: if <code>true</code>, include inherited props</li>
<li><code>nonEnumerables</code>: if <code>true</code>, include non-enumerable props</li>
<li><code>top</code>: if <code>true</code> (along with <code>nonEnumerables</code>), it includes top-level props</li>
<li><code>hidden</code>: if <code>true</code> (along with <code>nonEnumerables</code> &amp; <code>top</code>), it includes top-level hidden props.</li>
<li><code>strict</code>: if <code>true</code>, only <code>_.isObject</code> values are allowed, throws otherwise (i.e on <code>Primitives</code>)</li>
</ul>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../types/Keys-1.html" class="tsd-signature-type tsd-kind-type-alias">Keys</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="keys.html#keys.Toptions">Toptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">[]</span></h4><p>Array of keys or props of the input value, typed according to the input value &amp; options.</p>
<div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/DevZen-net/devzen-tools/blob/d06de7dc401f4a24262e2dfefdfce62aea86b4e9/packages/zen/src/code/loopzen/keys.ts#L320">src/code/loopzen/keys.ts:320</a></li></ul></aside></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:typings-choice"><span>Typings choice</span></a><a href="#md:examples"><span>Examples</span></a><a href="#md:zen-zkeys-rationale--stance"><span>Zen z.keys() rationale &amp; stance</span></a><a href="#md:typings-rationale"><span>Typings <wbr/>Rationale</span></a><ul><li><a href="#md:historical-reasons"><span>Historical <wbr/>Reasons</span></a></li><li><a href="#md:typings-are-optional"><span>Typings are optional!</span></a></li></ul><a href="#md:parameters"><span>Parameters</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@neozen/zen</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
