<!DOCTYPE html><html class="default" lang="en"><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>map | @neozen/zen</title><meta name="description" content="Documentation for @neozen/zen"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@neozen/zen</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@neozen/zen</a></li><li><a href="map.html">map</a></li></ul><h1>Function map</h1></div><section class="tsd-panel"><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="map" class="tsd-anchor"></a><span class="tsd-kind-call-signature">map</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.ImapCallback">ImapCallback</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.TcallbackItems">TcallbackItems</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.TcallbackKeys">TcallbackKeys</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">input</span>, <span class="tsd-kind-parameter">mapCb</span>, <span class="tsd-kind-parameter">options</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">GetMapReturn</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.ImapCallback">ImapCallback</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">null</span><span class="tsd-signature-symbol">&gt;</span><a href="#map" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Map over the (many) items of <strong>any possible input value</strong>, returning a new instance of the same input value type (if possible), with the results of calling the projector/mapping function on every &quot;nested&quot; element of the input value (for collections like Objects, Arrays, Maps, Sets but also for Iterators, Generators, AsyncIterators etc).</p>
<p>Similar idea to lodash <code>_.map()</code> or <code>Array.map()</code> or <code>_.mapValues()</code>, but powered by <a href="/functions/loop.html"><code>z.loop()</code></a>. Hence:</p>
<ul>
<li>
<p>it works with many value types, not just arrays (and objects with separate <code>_.mapValues()</code>) but also on <code>Map</code>, <code>Set</code>, <code>Iterator</code>, <code>Generator</code>, <code>AsyncIterator</code>, <code>Function</code>, <code>Promise</code> and even <code>isPrimitive</code> / <code>isSingle</code>s!</p>
</li>
<li>
<p>the main twist: it is not returning always just an <code>Array</code> like the normal <code>_.map</code> or <code>Array.map()</code>, but a copy of whatever the input value was, with the nested items mapped/projected over via the <code>mapCb</code> function. So a <code>map(new Map([]))</code> will return a <code>new Map([])</code>, with the same keys &amp; mapped values of the input Map values. A <code>map({})</code> will return a new object, with the same props as the original object, but with the values mapped over. And so on!</p>
</li>
</ul>
<p>Using <code>props: true</code> or<code>props: 'all'</code> you can only/also copy over the props of the original object, just like with <code>_.mapValues()</code>, but works for all object types. But this will use ONLY enumerable &amp; own props, to avoid messing with the new object's behavior and internals, and since these already exist on the new instance. Hence, <code>inherited: true</code> &amp; <code>nonEnumerables: true</code> are ignored in <code>map()</code>.</p>
<p>In effect:</p>
<ul>
<li>
<p>Arrays are copied &amp; mapped verbatim. Sparse Arrays will be mapped compacted / dense by default: the empty items will disappear in the new array, the new array will become dense. But if <code>sparse: true</code> it will be respecting sparse items position, and the new array will be sparse as well.</p>
</li>
<li>
<p>Objects are copied over like with <code>_.mapValues()</code>, respecting their props, including symbols ones (optionally with <code>symbol: true</code>), unlike <code>_.mapValues()</code> which deals only with string keys. But access is prohibited from <code>inherited</code> and <code>nonEnumerables</code> props.</p>
</li>
<li>
<p>Maps &amp; Sets are also copied over to new Map &amp; Set, with their items mapped over.</p>
</li>
<li>
<p>Functions are also supported, and the result is a new function, that passes the args &amp; this to original function, and returns the return value of the original value, but mapped.</p>
</li>
<li>
<p>Promises are similar to functions: a new Promise is returned, that resolves to the mapped value of the original promise.</p>
</li>
<li>
<p>Boxed primitives become a new instance of the same type, with their boxed value mapped.</p>
</li>
<li>
<p>User defined classes are NOT supported, it throws, cause it makes no sense.</p>
</li>
</ul>
<p>// @todo: 2 options:</p>
<ul>
<li>
<p><code>Iterators</code> / <code>Generator</code> sync or async:</p>
</li>
<li>
<p>are NOT supported, because they can't be iterated over without affecting the value, and they are potentially infinite ! The result is a new <code>Generator</code> / <code>AsyncGenerator</code> is the mapped items of the original.</p>
</li>
<li>
<p>are also supported, but use with caution! The result is a new <code>Generator</code> / <code>AsyncGenerator</code> with the mapped items of the original.</p>
<p>NOTE: it uses ONLY the remaining <code>Iterator</code> / <code>Generator</code> items, since there is no contract to restart Iterators in JS at the moment.</p>
<p>NOTE: When <code>props: 'all'</code>, the Generator's props are also copied over to the new Generator, all except <code>next</code>, <code>Symbol.iterator</code> &amp; <code>Symbol.asyncIterator</code> (since these would mess the iteration). Also in strict:true, you can't use <code>symbol: true</code> (via <code>props</code>) with Iterators/Generators (it throws).</p>
</li>
<li>
<p><a href="/functions/isSingle.html"><code>z.isSingle</code></a> values (primitives &amp; boxed) are also supported: the projection callback will be called only once (by default, with <code>options.loopSingles: true</code> &amp; <code>options.strict: false</code>) or throw an error (with <code>options.strict: true</code>). This follows the functional programming principles, that all values are enclosed and can be mapped over. This is also the reason why <code>options.strict: false</code> is the default.</p>
</li>
<li>
<p>Primitives are the only exception to the rule of &quot;getting back the same value type&quot;: you can change the return mapped type of the <code>input</code>, eg <code>const numAsString = map(42, (v) =&gt; v + '')</code> will return <code>'42'</code> as a <code>string</code>, not <code>42</code> as <code>number</code> (and type will follow). It's up to you if you want to return the same input value type!</p>
</li>
<li>
<p>WeakMap, WeakSet are NOT supported &amp; throw, since they can't be iterated / mapped / cloned.</p>
</li>
</ul>
<p>In all cases, any extra object props (eg <code>Array</code> Props, <code>Map</code> props etc) can be copied over to the new Array, with <code>props:true</code> - ignored for non-objects. WARNING: it is dangerous to copy inherited props like methods that might be bound or internals like <code>Symbol.iterator</code> to the mapped object, as they might mess with the new object's behavior. Some of these case are coded against, but dragons might still lurk.</p>
<ul>
<li>
<p>Powered by the mighty <a href="/functions/loop.html"><code>z.loop()</code></a> / <a href="/functions/keys.html"><code>z.keys</code></a> &amp; <a href="/functions/values.html"><code>z.values</code></a>, hence you can control which keys / idx are visited (<code>own</code> / <code>inherited</code> / <code>nonEnumerables</code> / <code>string</code> / <code>symbol</code> etc) via <a href="/interfaces/IloopOptions.html"><code>IloopOptions</code></a>.</p>
</li>
<li>
<p>You can pass an <a href="/interfaces/IloopOptions.html"><code>IloopOptions</code></a> object as the second parameter, instead of the callback, to control which keys / idx are visited (own / inherited / enumerable etc).</p>
<ul>
<li>NOTE: if <code>options.map</code> already exists on <code>map(val, myOptions, myMapCb)</code>, it throws an error.</li>
<li>But if <code>options.filter</code> exists, it is applied before the map. If the input value is an array, elements will appear on the result mapped array <strong>at the same indexes of the original</strong>, hence the resulting array will be sparse, for elements that are missing (because they didn't pass the filter). You can change this behavior with <code>sparse: false</code> in the options.</li>
</ul>
</li>
</ul>
</div><section class="tsd-panel"><h4>Type Parameters</h4><ul class="tsd-type-parameter-list"><li><span><a id="map.Tinput" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Tinput</span><span class="tsd-signature-keyword"> extends </span><span class="tsd-signature-type">unknown</span></span></li><li><span><a id="map.ImapCallback" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">ImapCallback</span><span class="tsd-signature-keyword"> extends </span><a href="../types/MapCallback.html" class="tsd-signature-type tsd-kind-type-alias">MapCallback</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.TcallbackItems">TcallbackItems</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.TcallbackKeys">TcallbackKeys</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">&gt;</span></span></li><li><span><a id="map.Toptions" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">Toptions</span><span class="tsd-signature-keyword"> extends </span><a href="../interfaces/IMapOptions.html" class="tsd-signature-type tsd-kind-interface">IMapOptions</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">any</span><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">&gt;</span></span></li><li><span><a id="map.TcallbackItems" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">TcallbackItems</span> = <span class="tsd-signature-type">LoopKeysOrValues</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">MapOptionsOverride</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">false</span><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">true</span><span class="tsd-signature-symbol">&gt;</span></span></li><li><span><a id="map.TcallbackKeys" class="tsd-anchor"></a><span class="tsd-kind-type-parameter">TcallbackKeys</span> = <a href="../types/LoopKeys.html" class="tsd-signature-type tsd-kind-type-alias">LoopKeys</a><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">MapOptionsOverride</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></span></li></ul></section><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">input</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a></span></li><li><span><span class="tsd-kind-parameter">mapCb</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.ImapCallback">ImapCallback</a></span></li><li><span><code class="tsd-tag">Optional</code><span class="tsd-kind-parameter">options</span>: <a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a></span></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">GetMapReturn</span><span class="tsd-signature-symbol">&lt;</span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Tinput">Tinput</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.Toptions">Toptions</a><span class="tsd-signature-symbol">, </span><a class="tsd-signature-type tsd-kind-type-parameter" href="map.html#map.ImapCallback">ImapCallback</a><span class="tsd-signature-symbol">, </span><span class="tsd-signature-type">null</span><span class="tsd-signature-symbol">&gt;</span></h4><p>the same type as the input value, but with the items mapped over. Objects, Arrays, Maps, Sets etc are copied and returned as new values. Also Iterators, Generators etc are returned as a Generator with their items mapped over.</p>
<div class="tsd-comment tsd-typography"><div class="tsd-tag-See"><h4 class="tsd-anchor-link"><a id="See" class="tsd-anchor"></a>See<a href="#See" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h4><p><a href="/functions/loop.html"><code>z.loop()</code></a> the power hidden behind <code>map()</code> and all other collection functions.</p>
</div></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/DevZen-net/devzen-tools/blob/d06de7dc401f4a24262e2dfefdfce62aea86b4e9/packages/zen/src/code/loopzen/map.ts#L159">src/code/loopzen/map.ts:159</a></li></ul></aside></li></ul></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>@neozen/zen</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
